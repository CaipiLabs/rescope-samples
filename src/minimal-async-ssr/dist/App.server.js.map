{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.js","webpack:///./src/App.scss","webpack:///./src/AppScope.js","webpack:///external \"cookie\"","webpack:///external \"react\"","webpack:///external \"react-dom\"","webpack:///external \"react-dom/server\"","webpack:///external \"react-rnd\"","webpack:///external \"rscopes\"","webpack:///external \"shortid\"","webpack:///external \"superagent\""],"names":["cookie","require","ReactDom","App","renderTo","node","state","cScope","Scope","AppScope","id","sid","parse","document","replace","window","scopes","test","renderSSR","serialize","sessionId","e","r","console","log","restore","mount","then","Home","hydrate","cfg","cb","rid","shortid","generate","alias","State","html","destroy","rscopes","spells","asStateMap","asScope","asRenderer","asRootRenderer","DaSearch","src","updateSearch","searching","nextState","length","wait","superagent","get","res","data","results","place","body","query","channel","location","img","image","url","descr","item","description","city","push","release","AppState","appState","selectedPostItId","selectPostIt","someData","items","newPostIt","_id","size","width","height","position","x","Math","random","y","text","updatePostIt","postIt","map","it","rmPostIt","filter","saveState","post","$stores","$parent","norefs","SSRIndex","props","appScope","$scope","__html","JSON","stringify","PostIt","$actions","parent","note","record","onSelect","selected","editing","doSave","$store","d","setState","direction","ref","delta","offsetWidth","offsetHeight","target","value","stopPropagation","country"],"mappings":"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","file":"App.server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/App.js\");\n","/*\n * Copyright (c)  2018 Wise Wild Web .\n *\n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"Software\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *\n *  The above copyright notice and this permission notice shall be included in all\n *  copies or substantial portions of the Software.\n *\n *  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *  SOFTWARE.\n *\n * @author : Nathanael Braun\n * @contact : caipilabs@gmail.com\n */\n\nimport React            from \"react\";\nimport shortid          from \"shortid\";\nimport AppScope         from './AppScope';\nimport {\n\tStore, reScope, scopeRef, scopeToProps, scopeToState, propsToScope, Scope\n}                       from \"rscopes\";\nimport {renderToString} from \"react-dom/server\"\n\nvar cookie = require('cookie');\n\nimport \"./App.scss\"\n\nlet ReactDom = require('react-dom');\n\n\nclass App {\n\tstatic renderTo  = ( node, state ) => {\n\t\tlet cScope    = new Scope(AppScope, { id: \"App\" }),\n\t\t    sid       = (cookie.parse(document.cookie) || {})[\"connect.sid\"];\n\t\tsid           = sid && sid.replace(/^s\\:([^\\.]+)(?:$|\\..*$)/ig, \"$1\")\n\t\twindow.scopes = Scope.scopes;\n\t\twindow.test   = () => {\n\t\t\tApp.renderSSR({\n\t\t\t\t              state    : cScope.serialize(),\n\t\t\t\t              sessionId: sid\n\t\t\t              }, ( e, r ) => console.log(r))\n\t\t}\n\t\tstate && cScope.restore(state)\n\t\tcScope.mount([\"Home\"])\n\t\t      .then(\n\t\t\t      ( { Home } ) => {\n\t\t\t\t      ReactDom.hydrate(<Home sessionId={ sid }/>, node);\n\t\t\t      }\n\t\t      )\n\t}\n\tstatic renderSSR = ( cfg, cb ) => {\n\t\tlet rid    = shortid.generate(),\n\t\t    cScope = new Scope(AppScope, { id: rid });\n\t\tcfg.state && cScope.restore(cfg.state, { alias: \"App\" })\n\t\t//let env    = new Scope({}, {}),\n\t\t//    cScope = new Scope(AppScope, {\n\t\t//        key     : \"App\",\n\t\t//        parent  : env,\n\t\t//        snapshot: { [ env._id ]: cfg.state }\n\t\t//    }),\n\t\t//    state  = { [ env._id ]: cfg.state }\n\t\t//;\n\t\t//cfg.state && cScope.restore(state);\n\t\t//console.log(cfg.sessionId, state)\n\t\tcScope.mount([\"SSRIndex\"])\n\t\t      .then(\n\t\t\t      ( State ) => {\n\t\t\t\t      ///mount deps\n\t\t\t\t      renderToString(\n\t\t\t\t\t      <State.SSRIndex appScope={ cScope }/>);\n\t\t\t\t      cScope.then(State => {\n\t\t\t\t\t      //State.SSRIndex.\n\t\t\t\t\t      let html = renderToString(\n\t\t\t\t\t\t      <State.SSRIndex appScope={ cScope }/>);\n\t\t\t\t\t      cb(null, html);\n\t\t\t\t\t      //console.log(cfg.sessionId, JSON.stringify(cScope.serialize({\n\t\t\t\t\t      //                                                               norefs: true,\n\t\t\t\t\t      //                                                               alias : \"App\"\n\t\t\t\t\t      //                                                           }), null, 2), html)\n\t\t\t\t\t      cScope.destroy()\n\t\t\t\t      })\n\t\t\t      }\n\t\t      )\n\t}\n}\n\nif ( typeof window != 'undefined' ) {\n\twindow.App = App;\n}\nexport default App","// empty (null-loader)","import React, {Component} from \"react\";\r\n\r\nimport superagent from \"superagent\";\r\nimport shortid    from \"shortid\";\r\nimport Rnd        from 'react-rnd';\r\nimport rscopes    from \"rscopes\";\r\n\r\nconst {\r\n\t      asStateMap, asScope, asRenderer, asRootRenderer\r\n      } = rscopes.spells;\r\n\r\nimport {renderToString} from \"react-dom/server\"\r\n\r\nexport default {\r\n\t@asScope\r\n\tAppState: {\r\n\t\t@asStateMap\r\n\t\tappState: {\r\n\t\t\tselectedPostItId: null,\r\n\t\t\tselectPostIt( selectedPostItId ) {\r\n\t\t\t\t//debugger\r\n\t\t\t\treturn { selectedPostItId };\r\n\t\t\t}\r\n\t\t},\r\n\t\t@asStateMap\r\n\t\tsomeData: {\r\n\t\t\t// initial state\r\n\t\t\tsrc  : \"/api/hello\",\r\n\t\t\titems: [{\r\n\t\t\t\t\"_id\"     : \"rkUQHZrqM\",\r\n\t\t\t\t\"size\"    : { \"width\": 300, \"height\": 400 },\r\n\t\t\t\t\"text\"    : \"New Post It #0 somewhere we wait some new shit out there !\",\r\n\t\t\t\t\"position\": { \"x\": 321, \"y\": 167 }\r\n\t\t\t}, {\r\n\t\t\t\t\"_id\"     : \"r1bcuMrcM\",\r\n\t\t\t\t\"size\"    : { \"width\": 300, \"height\": 400 },\r\n\t\t\t\t\"text\"    : \"do somethink\",\r\n\t\t\t\t\"position\": { \"x\": 260, \"y\": 576 }\r\n\t\t\t}],\r\n\t\t\t// actions\r\n\t\t\tnewPostIt() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\titems: [...this.nextState.items, {\r\n\t\t\t\t\t\t_id     : shortid.generate(),\r\n\t\t\t\t\t\tsize    : {\r\n\t\t\t\t\t\t\twidth : 200,\r\n\t\t\t\t\t\t\theight: 200\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tposition: {\r\n\t\t\t\t\t\t\tx: 100 + ~~(Math.random() * 600),\r\n\t\t\t\t\t\t\ty: 100 + ~~(Math.random() * 600)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttext    : \"New Post It #\" + this.nextState.items.length\r\n\t\t\t\t\t}]\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tupdatePostIt( postIt ) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\titems: this.nextState.items\r\n\t\t\t\t\t           .map(\r\n\t\t\t\t\t\t           it => (it._id === postIt._id)\r\n\t\t\t\t\t\t                 ? postIt\r\n\t\t\t\t\t\t                 : it\r\n\t\t\t\t\t           )\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trmPostIt( postIt ) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\titems: this.nextState.items\r\n\t\t\t\t\t           .filter(\r\n\t\t\t\t\t\t           it => (it._id !== postIt._id)\r\n\t\t\t\t\t           )\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsaveState() {\r\n\t\t\t\tsuperagent.post('/', window.state = this.$stores.$parent.serialize({ norefs: true }))\r\n\t\t\t\t          .then(( e, r ) => {\r\n\t\t\t\t\t          console.log(e, r)\r\n\t\t\t\t          })\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\t@asRenderer([\"!Home\"])\r\n\tSSRIndex: ( { Home, props: { sessionId, appScope } }, { $scope } ) =>\r\n\t\t<html lang=\"en\">\r\n\t\t<head>\r\n\t\t\t<meta charSet=\"UTF-8\"/>\r\n\t\t\t<title>Really basic drafty rescope + react SSR example</title>\r\n\t\t</head>\r\n\t\t<body>\r\n\t\t<div id=\"app\"><Home/></div>\r\n\t\t<script src=\"./App.js\"></script>\r\n\t\t<script\r\n\t\t\tdangerouslySetInnerHTML={ {\r\n\t\t\t\t__html: \"App.renderTo(document.getElementById('app'), \" + JSON.stringify(appScope.serialize({\r\n\t\t\t\t\t                                                                                            norefs: true,\r\n\t\t\t\t\t                                                                                            alias : 'App'\r\n\t\t\t\t                                                                                            })) + \", document.cookie);\"\r\n\t\t\t} }/>\r\n\t\t</body>\r\n\t\t</html>,\r\n\t\r\n\t@asRenderer([\"!AppState.appState\", \"!AppState.someData\", \"!PostIt\"])\r\n\tHome: ( {\r\n\t\t        someData, appState, PostIt\r\n\t        }, { $actions, $stores, $scope } ) =>\r\n\t\t<div>\r\n\t\t\t<h1>Really basic drafty rescope SSR example</h1>\r\n\t\t\t<div\r\n\t\t\t\tclassName={ \"newBtn button\" }\r\n\t\t\t\tonClick={ $actions.AppState.newPostIt }>\r\n\t\t\t\tAdd Post It\r\n\t\t\t</div>\r\n\t\t\t<div\r\n\t\t\t\tclassName={ \"saveBtn button\" }\r\n\t\t\t\tonClick={ $actions.AppState.saveState }>\r\n\t\t\t\tSave state\r\n\t\t\t</div>\r\n\t\t\t<pre>\r\n\t\t\t{\r\n\t\t\t\tJSON.stringify($scope.parent.parent.serialize({\r\n\t\t\t\t\t                                  norefs: true,\r\n\t\t\t\t\t                                  alias : 'App'\r\n\t\t\t\t                                  }), null, 2)\r\n\t\t\t}\r\n\t\t\t</pre>\r\n\t\t\t{\r\n\t\t\t\tsomeData.items.map(\r\n\t\t\t\t\tnote => <PostIt key={ note._id } record={ note }\r\n\t\t\t\t\t                onSelect={ e => $actions.AppState.selectPostIt(note._id) }\r\n\t\t\t\t\t                selected={ note._id == appState.selectedPostItId }/>\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t</div>,\r\n\t\r\n\t@asRenderer(\r\n\t\t{\r\n\t\t\t@asStateMap\r\n\t\t\tDaSearch: {\r\n\t\t\t\tsrc: \"https://query.yahooapis.com/v1/public/yql?format=json&env=sto&q=\",\r\n\t\t\t\t\r\n\t\t\t\tupdateSearch( searching ) {\r\n\t\t\t\t\tlet state = this.nextState;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif ( searching == state.searching ) return;\r\n\t\t\t\t\tif ( searching.length < 4 )\r\n\t\t\t\t\t\treturn { searching };\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.wait();\r\n\t\t\t\t\tsuperagent.get(state.src +\r\n\t\t\t\t\t\t               'select * from weather.forecast where woeid in (select woeid from geo.places(1) where text=\"' + searching + '\")')\r\n\t\t\t\t\t          .then(( res ) => {\r\n\t\t\t\t\t\t          if ( searching != this.nextState.searching ) return;\r\n\t\t\t\t\t\t          try {\r\n\t\t\t\t\t\t\t          this.data.results = {\r\n\t\t\t\t\t\t\t\t          place: res.body.query.results.channel.location,\r\n\t\t\t\t\t\t\t\t          img  : res.body.query.results.channel.image.url,\r\n\t\t\t\t\t\t\t\t          descr: res.body.query.results.channel.item.description.replace('<![CDATA[', '').replace(']]>', '')\r\n\t\t\t\t\t\t\t          };\r\n\t\t\t\t\t\t          } catch ( e ) {\r\n\t\t\t\t\t\t\t          this.data.results = {\r\n\t\t\t\t\t\t\t\t          place: { city: \"no results\" }\r\n\t\t\t\t\t\t\t          };\r\n\t\t\t\t\t\t          }\r\n\t\t\t\t\t\t          this.push(this.data)\r\n\t\t\t\t\t\t          this.release();\r\n\t\t\t\t\t          })\r\n\t\t\t\t\treturn { searching };\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t}, [\"DaSearch\"]\r\n\t)\r\n\tPostIt: ( {\r\n\t\t          props: { record, onSelect, selected },\r\n\t\t          position, text, size, editing,\r\n\t\t\r\n\t\t          DaSearch,\r\n\t\t\r\n\t\t          doSave = () => $actions.AppState.updatePostIt(\r\n\t\t\t          {\r\n\t\t\t\t          ...record,\r\n\t\t\t\t          size    : size || record.size,\r\n\t\t\t\t          position: position\r\n\t\t\t          })\r\n\t          }, { $actions, $stores, $store } ) => {\r\n\t\treturn (\r\n\t\t\t<Rnd\r\n\t\t\t\tabsolutePos={ true }\r\n\t\t\t\tz={ selected ? 2000 : 1 }\r\n\t\t\t\tsize={ size || record.size }\r\n\t\t\t\tposition={ position || record.position }\r\n\t\t\t\tonDragStop={ doSave }\r\n\t\t\t\tonResizeStop={ doSave }\r\n\t\t\t\tonDrag={ ( e, d ) => {\r\n\t\t\t\t\t!selected && onSelect(record)\r\n\t\t\t\t\t$store.setState(\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tposition: { x: d.x, y: d.y }\r\n\t\t\t\t\t\t});\r\n\t\t\t\t} }\r\n\t\t\t\tonResize={ ( e, direction, ref, delta, position ) => {\r\n\t\t\t\t\t$store.setState(\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tposition,\r\n\t\t\t\t\t\t\tsize: {\r\n\t\t\t\t\t\t\t\twidth : ref.offsetWidth,\r\n\t\t\t\t\t\t\t\theight: ref.offsetHeight\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t} }>\r\n\t\t\t\t<div className={ \"postit handle\" }>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t<div className={ \"search\" }>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tonChange={ e => {\r\n\t\t\t\t\t\t\t\t\t$actions.updateSearch(e.target.value);\r\n\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t\t//defaultValue={ DaSearch.searching }\r\n\t\t\t\t\t\t\t\tonMouseDown={ e => e.stopPropagation() }/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tDaSearch\r\n\t\t\t\t\t\t&& DaSearch.results\r\n\t\t\t\t\t\t&& DaSearch.results.place\r\n\t\t\t\t\t\t&& <div>\r\n\t\t\t\t\t\t\t{ DaSearch.results.place.city } - { DaSearch.results.place.country }\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t<div className={ \"text\" }\r\n\t\t\t\t\t     dangerouslySetInnerHTML={ {\r\n\t\t\t\t\t\t     __html: DaSearch\r\n\t\t\t\t\t\t\t     && DaSearch.results\r\n\t\t\t\t\t\t\t     && DaSearch.results.descr\r\n\t\t\t\t\t     } }/>\r\n\t\t\t\t</div>\r\n\t\t\t</Rnd>\r\n\t\t)\r\n\t},\r\n}","module.exports = require(\"cookie\");","module.exports = require(\"react\");","module.exports = require(\"react-dom\");","module.exports = require(\"react-dom/server\");","module.exports = require(\"react-rnd\");","module.exports = require(\"rscopes\");","module.exports = require(\"shortid\");","module.exports = require(\"superagent\");"],"sourceRoot":""}