{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"react\"","webpack:///external \"shortid\"","webpack:///external \"rscopes\"","webpack:///external \"react-dom/server\"","webpack:///./src/App.js","webpack:///./src/AppScope.js","webpack:///external \"superagent\"","webpack:///external \"react-rnd\"","webpack:///external \"cookie\"","webpack:///external \"react-dom\""],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","_rscopes","_server","cookie","ReactDom","App","renderTo","node","state","cScope","Scope","AppScope","id","sid","parse","document","replace","window","scopes","test","renderSSR","serialize","sessionId","e","console","log","restore","mount","then","_ref","Home","hydrate","_react2","default","createElement","cfg","cb","rid","shortid","generate","State","renderToString","SSRIndex","appScope","html","destroy","rscopes","spells","asStateMap","asScope","asRenderer","asRootRenderer","_applyDecoratedDescriptor","DaSearch","src","updateSearch","searching","_this","this","nextState","length","wait","superagent","res","data","results","place","body","query","channel","location","img","image","url","descr","item","description","city","push","release","_init","getOwnPropertyDescriptor","_obj","undefined","configurable","writable","initializer","AppState","appState","selectedPostItId","selectPostIt","someData","items","_id","size","width","height","text","position","x","y","newPostIt","Math","random","updatePostIt","postIt","map","it","rmPostIt","filter","saveState","post","$stores","$parent","norefs","_obj3","_init6","_init7","_ref2","_ref$props","props","$scope","lang","charSet","dangerouslySetInnerHTML","__html","JSON","stringify","alias","_ref3","_ref4","PostIt","$actions","className","onClick","parent","note","record","onSelect","selected","_ref5","_ref6","_ref5$props","editing","_ref5$doSave","doSave","_extends","$store","_reactRnd2","absolutePos","z","onDragStop","onResizeStop","onDrag","setState","onResize","direction","ref","delta","offsetWidth","offsetHeight","onChange","target","onMouseDown","stopPropagation","country"],"mappings":"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","file":"App.server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","module.exports = require(\"react\");","module.exports = require(\"shortid\");","module.exports = require(\"rscopes\");","module.exports = require(\"react-dom/server\");","/*\n * Copyright (c)  2018 Wise Wild Web .\n *\n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"Software\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *\n *  The above copyright notice and this permission notice shall be included in all\n *  copies or substantial portions of the Software.\n *\n *  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *  SOFTWARE.\n *\n * @author : Nathanael Braun\n * @contact : caipilabs@gmail.com\n */\n\nimport React            from \"react\";\nimport shortid          from \"shortid\";\nimport AppScope         from './AppScope';\nimport {\n\tStore, reScope, scopeRef, scopeToProps, scopeToState, propsToScope, Scope\n}                       from \"rscopes\";\nimport {renderToString} from \"react-dom/server\"\n\nvar cookie = require('cookie');\n\nimport \"./App.scss\"\n\nlet ReactDom = require('react-dom');\n\n\nclass App {\n\tstatic renderTo  = ( node, state ) => {\n\t\tlet cScope    = new Scope(AppScope, { id: \"App\" }),\n\t\t    sid       = (cookie.parse(document.cookie) || {})[\"connect.sid\"];\n\t\tsid           = sid && sid.replace(/^s\\:([^\\.]+)(?:$|\\..*$)/ig, \"$1\")\n\t\twindow.scopes = Scope.scopes;\n\t\twindow.test   = () => {\n\t\t\tApp.renderSSR({\n\t\t\t\t              state    : cScope.serialize(),\n\t\t\t\t              sessionId: sid\n\t\t\t              }, ( e, r ) => console.log(r))\n\t\t}\n\t\tstate && cScope.restore(state)\n\t\tcScope.mount([\"Home\"])\n\t\t      .then(\n\t\t\t      ( { Home } ) => {\n\t\t\t\t      ReactDom.hydrate(<Home sessionId={ sid }/>, node);\n\t\t\t      }\n\t\t      )\n\t}\n\tstatic renderSSR = ( cfg, cb ) => {\n\t\tlet rid    = shortid.generate(),\n\t\t    cScope = new Scope(AppScope, { id: rid });\n\t\t//cfg.state && cScope.restore(cfg.state, { alias: \"App\" })\n\t\t//let env    = new Scope({}, {}),\n\t\t//    cScope = new Scope(AppScope, {\n\t\t//        key     : \"App\",\n\t\t//        parent  : env,\n\t\t//        snapshot: { [ env._id ]: cfg.state }\n\t\t//    }),\n\t\t//    state  = { [ env._id ]: cfg.state }\n\t\t//;\n\t\t//cfg.state && cScope.restore(state);\n\t\t//console.log(cfg.sessionId, state)\n\t\tcScope.mount([\"SSRIndex\"])\n\t\t      .then(\n\t\t\t      ( State ) => {\n\t\t\t\t      ///mount deps\n\t\t\t\t      renderToString(\n\t\t\t\t\t      <State.SSRIndex appScope={ cScope }/>);\n\t\t\t\t      cScope.then(State => {\n\t\t\t\t\t      //State.SSRIndex.\n\t\t\t\t\t      let html = renderToString(\n\t\t\t\t\t\t      <State.SSRIndex appScope={ cScope }/>);\n\t\t\t\t\t      cb(null, html);\n\t\t\t\t\t      //console.log(cfg.sessionId, JSON.stringify(cScope.serialize({\n\t\t\t\t\t      //                                                               norefs: true,\n\t\t\t\t\t      //                                                               alias : \"App\"\n\t\t\t\t\t      //                                                           }), null, 2), html)\n\t\t\t\t\t      cScope.destroy()\n\t\t\t\t      })\n\t\t\t      }\n\t\t      )\n\t}\n}\n\nif ( typeof window != 'undefined' ) {\n\twindow.App = App;\n}\nexport default App","import React, {Component} from \"react\";\r\n\r\nimport superagent from \"superagent\";\r\nimport shortid    from \"shortid\";\r\nimport Rnd        from 'react-rnd';\r\nimport rscopes    from \"rscopes\";\r\n\r\nconst {\r\n\t      asStateMap, asScope, asRenderer, asRootRenderer\r\n      } = rscopes.spells;\r\n\r\nimport {renderToString} from \"react-dom/server\"\r\n\r\nexport default {\r\n\t@asScope\r\n\tAppState: {\r\n\t\t@asStateMap\r\n\t\tappState: {\r\n\t\t\tselectedPostItId: null,\r\n\t\t\tselectPostIt( selectedPostItId ) {\r\n\t\t\t\t//debugger\r\n\t\t\t\treturn { selectedPostItId };\r\n\t\t\t}\r\n\t\t},\r\n\t\t@asStateMap\r\n\t\tsomeData: {\r\n\t\t\t// initial state\r\n\t\t\tsrc  : \"/api/hello\",\r\n\t\t\titems: [{\r\n\t\t\t\t\"_id\"     : \"rkUQHZrqM\",\r\n\t\t\t\t\"size\"    : { \"width\": 300, \"height\": 400 },\r\n\t\t\t\t\"text\"    : \"New Post It #0 somewhere we wait some new shit out there !\",\r\n\t\t\t\t\"position\": { \"x\": 321, \"y\": 167 }\r\n\t\t\t}, {\r\n\t\t\t\t\"_id\"     : \"r1bcuMrcM\",\r\n\t\t\t\t\"size\"    : { \"width\": 300, \"height\": 400 },\r\n\t\t\t\t\"text\"    : \"do somethink\",\r\n\t\t\t\t\"position\": { \"x\": 260, \"y\": 576 }\r\n\t\t\t}],\r\n\t\t\t// actions\r\n\t\t\tnewPostIt() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\titems: [...this.nextState.items, {\r\n\t\t\t\t\t\t_id     : shortid.generate(),\r\n\t\t\t\t\t\tsize    : {\r\n\t\t\t\t\t\t\twidth : 200,\r\n\t\t\t\t\t\t\theight: 200\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tposition: {\r\n\t\t\t\t\t\t\tx: 100 + ~~(Math.random() * 600),\r\n\t\t\t\t\t\t\ty: 100 + ~~(Math.random() * 600)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttext    : \"New Post It #\" + this.nextState.items.length\r\n\t\t\t\t\t}]\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tupdatePostIt( postIt ) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\titems: this.nextState.items\r\n\t\t\t\t\t           .map(\r\n\t\t\t\t\t\t           it => (it._id === postIt._id)\r\n\t\t\t\t\t\t                 ? postIt\r\n\t\t\t\t\t\t                 : it\r\n\t\t\t\t\t           )\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trmPostIt( postIt ) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\titems: this.nextState.items\r\n\t\t\t\t\t           .filter(\r\n\t\t\t\t\t\t           it => (it._id !== postIt._id)\r\n\t\t\t\t\t           )\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsaveState() {\r\n\t\t\t\tsuperagent.post('/', window.state = this.$stores.$parent.serialize({ norefs: true }))\r\n\t\t\t\t          .then(( e, r ) => {\r\n\t\t\t\t\t          console.log(e, r)\r\n\t\t\t\t          })\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\t@asRenderer([\"!Home\"])\r\n\tSSRIndex: ( { Home, props: { sessionId, appScope } }, { $scope } ) =>\r\n\t\t<html lang=\"en\">\r\n\t\t<head>\r\n\t\t\t<meta charSet=\"UTF-8\"/>\r\n\t\t\t<title>Really basic drafty rescope + react SSR example</title>\r\n\t\t</head>\r\n\t\t<body>\r\n\t\t<div id=\"app\"><Home/></div>\r\n\t\t<script src=\"./App.js\"></script>\r\n\t\t<script\r\n\t\t\tdangerouslySetInnerHTML={ {\r\n\t\t\t\t__html: \"App.renderTo(document.getElementById('app'), \" + JSON.stringify(appScope.serialize({\r\n\t\t\t\t\t                                                                                            norefs: true,\r\n\t\t\t\t\t                                                                                            alias : 'App'\r\n\t\t\t\t                                                                                            })) + \", document.cookie);\"\r\n\t\t\t} }/>\r\n\t\t</body>\r\n\t\t</html>,\r\n\t\r\n\t@asRenderer([\"!AppState.appState\", \"!AppState.someData\", \"!PostIt\"])\r\n\tHome: ( {\r\n\t\t        someData, appState, PostIt\r\n\t        }, { $actions, $stores, $scope } ) =>\r\n\t\t<div>\r\n\t\t\t<h1>Really basic drafty rescope SSR example</h1>\r\n\t\t\t<div\r\n\t\t\t\tclassName={ \"newBtn button\" }\r\n\t\t\t\tonClick={ $actions.AppState.newPostIt }>\r\n\t\t\t\tAdd Post It\r\n\t\t\t</div>\r\n\t\t\t<div\r\n\t\t\t\tclassName={ \"saveBtn button\" }\r\n\t\t\t\tonClick={ $actions.AppState.saveState }>\r\n\t\t\t\tSave state\r\n\t\t\t</div>\r\n\t\t\t<pre>\r\n\t\t\t{\r\n\t\t\t\tJSON.stringify($scope.parent.parent.serialize({\r\n\t\t\t\t\t                                  norefs: true,\r\n\t\t\t\t\t                                  alias : 'App'\r\n\t\t\t\t                                  }), null, 2)\r\n\t\t\t}\r\n\t\t\t</pre>\r\n\t\t\t{\r\n\t\t\t\tsomeData.items.map(\r\n\t\t\t\t\tnote => <PostIt key={ note._id } record={ note }\r\n\t\t\t\t\t                onSelect={ e => $actions.AppState.selectPostIt(note._id) }\r\n\t\t\t\t\t                selected={ note._id == appState.selectedPostItId }/>\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t</div>,\r\n\t\r\n\t@asRenderer(\r\n\t\t{\r\n\t\t\t@asStateMap\r\n\t\t\tDaSearch: {\r\n\t\t\t\tsrc: \"https://query.yahooapis.com/v1/public/yql?format=json&env=sto&q=\",\r\n\t\t\t\t\r\n\t\t\t\tupdateSearch( searching ) {\r\n\t\t\t\t\tlet state = this.nextState;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif ( searching == state.searching ) return;\r\n\t\t\t\t\tif ( searching.length < 4 )\r\n\t\t\t\t\t\treturn { searching };\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.wait();\r\n\t\t\t\t\tsuperagent.get(state.src +\r\n\t\t\t\t\t\t               'select * from weather.forecast where woeid in (select woeid from geo.places(1) where text=\"' + searching + '\")')\r\n\t\t\t\t\t          .then(( res ) => {\r\n\t\t\t\t\t\t          if ( searching != this.nextState.searching ) return;\r\n\t\t\t\t\t\t          try {\r\n\t\t\t\t\t\t\t          this.data.results = {\r\n\t\t\t\t\t\t\t\t          place: res.body.query.results.channel.location,\r\n\t\t\t\t\t\t\t\t          img  : res.body.query.results.channel.image.url,\r\n\t\t\t\t\t\t\t\t          descr: res.body.query.results.channel.item.description.replace('<![CDATA[', '').replace(']]>', '')\r\n\t\t\t\t\t\t\t          };\r\n\t\t\t\t\t\t          } catch ( e ) {\r\n\t\t\t\t\t\t\t          this.data.results = {\r\n\t\t\t\t\t\t\t\t          place: { city: \"no results\" }\r\n\t\t\t\t\t\t\t          };\r\n\t\t\t\t\t\t          }\r\n\t\t\t\t\t\t          this.push(this.data)\r\n\t\t\t\t\t\t          this.release();\r\n\t\t\t\t\t          })\r\n\t\t\t\t\treturn { searching };\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t}, [\"DaSearch\"]\r\n\t)\r\n\tPostIt: ( {\r\n\t\t          props: { record, onSelect, selected },\r\n\t\t          position, text, size, editing,\r\n\t\t\r\n\t\t          DaSearch,\r\n\t\t\r\n\t\t          doSave = () => $actions.AppState.updatePostIt(\r\n\t\t\t          {\r\n\t\t\t\t          ...record,\r\n\t\t\t\t          size    : size || record.size,\r\n\t\t\t\t          position: position\r\n\t\t\t          })\r\n\t          }, { $actions, $stores, $store } ) => {\r\n\t\treturn (\r\n\t\t\t<Rnd\r\n\t\t\t\tabsolutePos={ true }\r\n\t\t\t\tz={ selected ? 2000 : 1 }\r\n\t\t\t\tsize={ size || record.size }\r\n\t\t\t\tposition={ position || record.position }\r\n\t\t\t\tonDragStop={ doSave }\r\n\t\t\t\tonResizeStop={ doSave }\r\n\t\t\t\tonDrag={ ( e, d ) => {\r\n\t\t\t\t\t!selected && onSelect(record)\r\n\t\t\t\t\t$store.setState(\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tposition: { x: d.x, y: d.y }\r\n\t\t\t\t\t\t});\r\n\t\t\t\t} }\r\n\t\t\t\tonResize={ ( e, direction, ref, delta, position ) => {\r\n\t\t\t\t\t$store.setState(\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tposition,\r\n\t\t\t\t\t\t\tsize: {\r\n\t\t\t\t\t\t\t\twidth : ref.offsetWidth,\r\n\t\t\t\t\t\t\t\theight: ref.offsetHeight\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t} }>\r\n\t\t\t\t<div className={ \"postit handle\" }>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t<div className={ \"search\" }>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tonChange={ e => {\r\n\t\t\t\t\t\t\t\t\t$actions.updateSearch(e.target.value);\r\n\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t\t//defaultValue={ DaSearch.searching }\r\n\t\t\t\t\t\t\t\tonMouseDown={ e => e.stopPropagation() }/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tDaSearch\r\n\t\t\t\t\t\t&& DaSearch.results\r\n\t\t\t\t\t\t&& DaSearch.results.place\r\n\t\t\t\t\t\t&& <div>\r\n\t\t\t\t\t\t\t{ DaSearch.results.place.city } - { DaSearch.results.place.country }\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t<div className={ \"text\" }\r\n\t\t\t\t\t     dangerouslySetInnerHTML={ {\r\n\t\t\t\t\t\t     __html: DaSearch\r\n\t\t\t\t\t\t\t     && DaSearch.results\r\n\t\t\t\t\t\t\t     && DaSearch.results.descr\r\n\t\t\t\t\t     } }/>\r\n\t\t\t\t</div>\r\n\t\t\t</Rnd>\r\n\t\t)\r\n\t},\r\n}","module.exports = require(\"superagent\");","module.exports = require(\"react-rnd\");","module.exports = require(\"cookie\");","module.exports = require(\"react-dom\");"],"sourceRoot":""}